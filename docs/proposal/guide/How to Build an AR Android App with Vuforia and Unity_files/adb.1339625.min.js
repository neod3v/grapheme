/*  AdBridg Connect v1.0.1, copyright AdBridg Inc. All rights reserved. */
/* Portions of this software are derived from PrebidJS (prebid.org) under the Apache 2.0 license (http://www.apache.org/licenses/LICENSE-2.0). The PrebidJS source code may be found at https://github.com/prebid/Prebid.js. */
!function e(t,n,i){function r(a,o){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!o&&s)return s(a,!0);if(d)return d(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var d="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){function i(e,t){e&&t?typeof e.callBids===f.objectType_function?p[t]=e:l.logError("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):l.logError("bidAdaptor or bidderCode not specified")}var r=e("./adapters/appnexus.js"),d=e("./adapters/aol"),a=e("./adapters/sovrn"),o=e("./adapters/index"),s=e("./adapters/sonobi"),u=e("./adapters/pulsepoint"),c=e("./bidmanager.js"),l=e("./utils.js"),g=e("./adbridg/analytics"),f=e("./constants.json"),p={};n.callBids=function(e){g.biddingStarted(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bidderCode&&p[n.bidderCode]){l.logMessage("CALLING BIDDER ======= "+n.bidderCode);var i=p[n.bidderCode];i.callBids(n);var r=(new Date).getTime();c.registerBidRequestTime(n.bidderCode,r),i.defaultBidderSettings&&c.registerDefaultBidderSetting(n.bidderCode,i.defaultBidderSettings)}}},n.hasAdapter=function(e){return p[e]?!0:!1},i(r("cpxi"),"cpxi"),i(r("appnexus"),"appnexus"),i(d(),"aol"),i(a(),"sovrn"),i(o(),"index"),i(s(),"sonobi"),i(u(),"pulsepoint")},{"./adapters/aol":2,"./adapters/appnexus.js":3,"./adapters/index":4,"./adapters/pulsepoint":5,"./adapters/sonobi":6,"./adapters/sovrn":7,"./adbridg/analytics":8,"./bidmanager.js":15,"./constants.json":16,"./utils.js":18}],2:[function(e,t,n){var i=e("../utils.js"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),a=e("../adloader"),o=function(){function e(e){var t=h.createElement("DIV");return e&&e.length||(e="ad-placeholder-"+ ++m),t.id=e+"-head-unit",b.appendChild(t),t.id}function t(e,t){var a,o=p[t.alias];if(!o)return void i.logError("mismatched bid: "+t.placement,g,t);if(a=e.getCPM(),null===a||isNaN(a))return n(e,t);delete p[t.alias];var s=r.createBid(1),u=e.getCreative();"undefined"!=typeof e.getPixels()&&(u+=e.getPixels()),s.bidderCode=g,s.ad=u,s.cpm=a,s.width=e.getAdWidth(),s.height=e.getAdHeight(),s.creativeId=e.getCreativeId(),s.adbuid=o.adbuid,s.adbbdr=o.adbbdr,s.adbbuid=o.adbbuid,s.adbinfo=[2,e.getCreativeId(),(o.params||{}).bidFloor],d.addBidResponse(o.placementCode,s)}function n(e,t){var n=p[t.alias];if(!n)return void i.logError("mismatched bid: "+t.placement,g,t);delete p[t.alias];var a=r.createBid(2);a.bidderCode=g,a.reason=e.getNbr(),a.raw=e.getResponse(),a.adbuid=n.adbuid,a.adbbdr=n.adbbdr,a.adbbuid=n.adbbuid,d.addBidResponse(n.placementCode,a)}function o(t){var n=t.params.alias||i.getUniqueIdentifierStr();return p[n]=t,{adContainerId:e(t.params.adContainerId),server:t.params.server,sizeid:t.params.sizeId||0,pageid:t.params.pageId,secure:"https:"===document.location.protocol,serviceType:"pubapi",performScreenDetection:!1,alias:n,network:t.params.network,placement:parseInt(t.params.placement),gpt:{adUnitPath:t.params.adUnitPath||t.placementCode,size:t.params.size||(t.sizes||[])[0]},params:{cors:"yes",cmd:"bid",bidfloor:"undefined"!=typeof t.params.bidFloor?t.params.bidFloor.toString():""},pubApiConfig:f,placementCode:t.placementCode}}function s(){return window.ADTECH?void i._each(c,function(e){var t=o(e);window.ADTECH.loadAd(t)}):void i.logError("window.ADTECH is not present!",g)}function u(e){window.bidRequestConfig=window.bidRequestConfig||{},window.dacBidRequestConfigs=window.dacBidRequestConfigs||{},c=e.bids,c&&c.length&&a.loadScript(l,s)}var c,l="https://secure-ads.pictela.net/rm/marketplace/pubtaglib/0_4_0/pubtaglib_0_4_0.js",g="aol",f={pixelsDivId:"pixelsDiv",defaultKey:"aolBid",roundingConfig:[{from:0,to:999,roundFunction:"tenCentsRound"},{from:1e3,to:-1,roundValue:1e3}],pubApiOK:t,pubApiER:n},p={},h=window.document,b=h.getElementsByTagName("HEAD")[0],m=0;return{callBids:u}};t.exports=o},{"../adloader":13,"../bidfactory.js":14,"../bidmanager.js":15,"../utils.js":18}],3:[function(e,t,n){var i=e("../constants.json"),r=e("../utils.js"),d=e("../adloader.js"),a=e("../bidmanager.js"),o=e("../bidfactory.js"),s=function(e){function t(e,t){var n=r.getBidIdParamater("placementId",e.params),i=r.getBidIdParamater("member",e.params),d=r.getBidIdParamater("invCode",e.params),a=r.getBidIdParamater("query",e.params),o=r.getBidIdParamater("referrer",e.params),s=r.getBidIdParamater("alt_referrer",e.params),u="http"+("https:"===document.location.protocol?"s://secure.adnxs.com/jpt?":"://ib.adnxs.com/jpt?");u=r.tryAppendQueryString(u,"callback","AdBridg.__anResponse"),u=r.tryAppendQueryString(u,"callback_uid",t),u=r.tryAppendQueryString(u,"psa","0"),u=r.tryAppendQueryString(u,"id",n),u=r.tryAppendQueryString(u,"member_id",i),u=r.tryAppendQueryString(u,"code",d);var c=r.parseSizesInput(e.sizes);c&&(u+=c+"&");var l=r.parseQueryStringParameters(a);l&&(u+=l);var g=r.extend({},e.params);delete g.placementId,delete g.invCode,delete g.query,delete g.referrer,delete g.alt_referrer,delete g.member;var f=r.parseQueryStringParameters(g);return f&&(u+=f),""===o&&(o=r.getTopWindowUrl()),u=r.tryAppendQueryString(u,"referrer",o),u=r.tryAppendQueryString(u,"alt_referrer",s),u.lastIndexOf("&")===u.length-1&&(u=u.substring(0,u.length-1)),u}var n=function(e){for(var n=e.bids,i=n.length,o=0;i>o;o++){var s=n[o],u=r.getUniqueIdentifierStr();d.loadScript(t(s,u)),a.pbCallbackMap[u]=s}};return AdBridg.__anResponse=r.tryBidHandler(function(e){var t,n;if(!e||!e.callback_uid)throw new Error("Invalid AN callback object");var r=e.callback_uid,d="",s=a.getPlacementIdByCBIdentifer(r);s&&(t=s.bidder,d=s.placementCode,s.status=i.STATUS.GOOD);var u=[];if(e.result&&e.result.cpm&&0!==e.result.cpm){n=parseInt(e.result.cpm,10),n=n/1e4*((s.params||{}).adjust||1);var c=e.result.creative_id;u=o.createBid(1),u.creative_id=c,u.bidderCode=t,u.cpm=n,u.adUrl=e.result.ad,u.width=e.result.width,u.height=e.result.height,u.dealId=e.result.deal_id,u.adbuid=s.adbuid,u.adbbdr=s.adbbdr,u.adbbuid=s.adbbuid,u.adbinfo=[1,c,u.dealId||0],a.addBidResponse(d,u)}else u=o.createBid(2),u.bidderCode=t,u.adbuid=s.adbuid,u.adbbdr=s.adbbdr,u.adbbuid=s.adbbuid,a.addBidResponse(d,u)}),{callBids:n}};t.exports=s},{"../adloader.js":13,"../bidfactory.js":14,"../bidmanager.js":15,"../constants.json":16,"../utils.js":18}],4:[function(e,t,n){var i=e("../utils.js"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),a=e("../adloader.js"),o="INDEXEXCHANGE",s="index",u=function(){};window.cygnus_index_args={};var c=[[728,90],[120,600],[300,250],[160,600],[336,280],[234,60],[300,600],[300,50],[320,50],[970,250],[300,1050],[970,90],[180,150]],l=function(){function e(e){var t=d[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}function t(t){return r.lastIndex=0,r.test(t)?t.replace(r,e):t}function n(e,t,n){if(this.initialized=!1,"number"!=typeof e||e%1!==0||0>e)throw"Invalid Site ID";if("number"==typeof n&&n%1===0&&n>=0&&(this.timeoutDelay=n),this.siteID=e,this.impressions=[],this._parseFnName=void 0,top===self?(this.sitePage=location.href,this.topframe=1):(this.sitePage=document.referrer,this.topframe=0),"undefined"!=typeof t){if("function"!=typeof t)throw"Invalid jsonp target function";this._parseFnName="cygnus_index_args.parseFn"}"undefined"==typeof _IndexRequestData.requestCounter?_IndexRequestData.requestCounter=Math.floor(256*Math.random()):_IndexRequestData.requestCounter=(_IndexRequestData.requestCounter+1)%256,this.requestID=String((new Date).getTime()%2592e3*256+_IndexRequestData.requestCounter+256),this.initialized=!0}window.index_slots=[],window.cygnus_index_args.parseFn=u;var r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};n.prototype.serialize=function(){var e='{"id":'+this.requestID+',"site":{"page":"'+t(this.sitePage)+'"';"string"==typeof document.referrer&&(e+=',"ref":"'+t(document.referrer)+'"'),e+='},"imp":[';for(var n=0;n<this.impressions.length;n++){var i=this.impressions[n],r=[];e+='{"id":"'+i.id+'", "banner":{"w":'+i.w+',"h":'+i.h+',"topframe":'+String(this.topframe)+"}","number"==typeof i.bidfloor&&(e+=',"bidfloor":'+i.bidfloor,"string"==typeof i.bidfloorcur&&(e+=',"bidfloorcur":"'+t(i.bidfloorcur)+'"')),"string"!=typeof i.slotID||i.slotID.match(/^\s*$/)||r.push('"sid":"'+t(i.slotID)+'"'),"number"==typeof i.siteID&&r.push('"siteID":'+i.siteID),r.length>0&&(e+=',"ext": {'+r.join()+"}"),e+=n+1===this.impressions.length?"}":"},"}return e+="]}"},n.prototype.setPageOverride=function(e){return"string"!=typeof e||e.match(/^\s*$/)?!1:(this.sitePage=e,!0)},n.prototype.addImpression=function(e,t,n,i,r,d){var a={id:String(this.impressions.length+1)};if("number"!=typeof e||1>=e)return null;if("number"!=typeof t||1>=t)return null;if(("string"==typeof r||"number"==typeof r)&&String(r).length<=50&&(a.slotID=String(r)),a.w=e,a.h=t,void 0!==n&&"number"!=typeof n)return null;if("number"==typeof n){if(0>n)return null;if(a.bidfloor=n,void 0!==i&&"string"!=typeof i)return null;a.bidfloorcur=i}if("undefined"!=typeof d){if(!("number"==typeof d&&d%1===0&&d>=0))return null;a.siteID=d}return this.impressions.push(a),a.id},n.prototype.buildRequest=function(){if(0!==this.impressions.length&&this.initialized===!0){var e=encodeURIComponent(this.serialize()),t="https:"===window.location.protocol?"https://as-sec.casalemedia.com":"http://as.casalemedia.com";return t+="/headertag?v=9&x3=1&fn=cygnus_index_parse_res&s="+this.siteID+"&r="+e,"number"==typeof this.timeoutDelay&&this.timeoutDelay%1===0&&this.timeoutDelay>=0&&(t+="&t="+this.timeoutDelay),t}};try{if("undefined"==typeof cygnus_index_args||"undefined"==typeof cygnus_index_args.siteID||"undefined"==typeof cygnus_index_args.slots)return;"undefined"==typeof window._IndexRequestData&&(window._IndexRequestData={},window._IndexRequestData.impIDToSlotID={},window._IndexRequestData.reqOptions={});var a=new n(cygnus_index_args.siteID,cygnus_index_args.parseFn,cygnus_index_args.timeout);cygnus_index_args.url&&"string"==typeof cygnus_index_args.url&&a.setPageOverride(cygnus_index_args.url),_IndexRequestData.impIDToSlotID[a.requestID]={},_IndexRequestData.reqOptions[a.requestID]={};for(var s,c,l=0;l<cygnus_index_args.slots.length;l++)s=cygnus_index_args.slots[l],c=a.addImpression(Number(s.width),Number(s.height),s.bidfloor,s.bidfloorcur,s.id,s.siteID),c&&(_IndexRequestData.impIDToSlotID[a.requestID][c]=String(s.id));return"number"==typeof cygnus_index_args.targetMode&&(_IndexRequestData.reqOptions[a.requestID].targetMode=cygnus_index_args.targetMode),"function"==typeof cygnus_index_args.callback&&(_IndexRequestData.reqOptions[a.requestID].callback=cygnus_index_args.callback),a.buildRequest()}catch(g){i.logError("Error calling index adapter",o,g)}},g=function(){function e(e){var h=e.bids;if(i.hasValidBidRequest(h[0].params,f,o)){cygnus_index_args.slots=[];for(var b=0,m=0;m<h.length;m++){for(var v=h[m],_=0,y=!1,B=0;B<c.length;B++)if(Number(v.params.width)===c[B][0]&&Number(v.params.height)===c[B][1]){y=!0;break}if(y){v.params.timeout&&"undefined"==typeof cygnus_index_args.timeout&&(cygnus_index_args.timeout=v.params.timeout);var w=Number(v.params.siteID);if(w&&(w&&"undefined"==typeof cygnus_index_args.siteID&&(cygnus_index_args.siteID=w),b++,i.hasValidBidRequest(v.params,f,o))){p=v.placementCode;var A=v.params[f[0]];g[A]=v,_++;var I={width:v.params.width,height:v.params.height},S=A+"_"+_;if(cygnus_index_args.slots=t({id:S,width:I.width,height:I.height,siteID:w||cygnus_index_args.siteID},cygnus_index_args.slots),v.params.tier2SiteID){var C=Number(v.params.tier2SiteID);if("undefined"!=typeof C&&!C)continue;cygnus_index_args.slots=t({id:"T1_"+S,width:I.width,height:I.height,siteID:C},cygnus_index_args.slots)}if(v.params.tier3SiteID){var x=Number(v.params.tier3SiteID);if("undefined"!=typeof x&&!x)continue;cygnus_index_args.slots=t({id:"T2_"+S,width:I.width,height:I.height,siteID:x},cygnus_index_args.slots)}}}}cygnus_index_args.slots.length>20&&i.logError("Too many unique sizes on slots, will use the first 20.",o);var T=l();T&&a.loadScript(T);var E=!1;window.cygnus_index_ready_state=i.tryBidHandler(function(){if(!E){E=!0;try{var e=_IndexRequestData.targetIDToBid;cygnus_index_args;for(var t in g){var a=g[t],c=a.placementCode,l=[];for(var f in e){var p=/(T\d_)?(.+)_(\d+)_(\d+)/.exec(f),h=p[1]||"",b=p[2],m=p[3],v=p[4],_=b+"_"+m,y=n(cygnus_index_args,h+_);if(b===t){var B=r.createBid(1);B.cpm=v/100,B.ad=e[f][0],B.ad_id=t,B.bidderCode=s,B.width=y.width,B.height=y.height,B.siteID=y.siteID,l.push(B)}}var w=void 0;if(l.length>0)for(var A=0;A<l.length;A++){var B=l[A];"undefined"!=typeof w?B.cpm>w.cpm&&(w=B):w=B}else{var B=r.createBid(2);B.bidderCode=s,w=B}w.adbbdr=a.adbbdr,w.adbuid=a.adbuid,w.adbbuid=a.adbbuid,d.addBidResponse(c,w)}}catch(I){i.logError("Error calling index adapter",o,I),u()}g={}}})}}function t(e,t){for(var n=0;n<t.length;n++)if(e.id===t[n].id)return t;return t.push(e),t}function n(e,t){var n=e.slots,r={};return i._each(n,function(e){e.id===t&&(r=e)}),r}function u(){var e=r.createBid(2);e.bidderCode=s,d.addBidResponse(p,e)}var g={},f=["id","siteID"],p="";return{callBids:e}};t.exports=g},{"../adloader.js":13,"../bidfactory.js":14,"../bidmanager.js":15,"../utils.js":18}],5:[function(e,t,n){var i=e("../bidfactory.js"),r=e("../bidmanager.js"),d=e("../adloader.js"),a=function(){function e(e){"undefined"==typeof window.pp?d.loadScript(o,function(){t(e)}):t(e)}function t(e){for(var t=e.bids,i=0;i<t.length;i++){var r=t[i],d=n(r),a=new window.pp.Ad({cf:r.params.cf,cp:r.params.cp,ct:r.params.ct,cn:1,ca:window.pp.requestActions.BID,cu:s,adUnitId:r.placementCode,callback:d});a.display()}}function n(e){return function(t){a(e,t)}}function a(e,t){if(t){var n=e.params.cf.toUpperCase().split("X"),d=i.createBid(1);d.bidderCode=e.bidder,d.cpm=t.bidCpm,d.ad=t.html,d.width=n[0],d.height=n[1],d.adbbdr=e.adbbdr,d.adbuid=e.adbuid,d.adbbuid=e.adbbuid,r.addBidResponse(e.placementCode,d)}else{var a=i.createBid(2);a.bidderCode=e.bidder,a.adbbdr=e.adbbdr,a.adbuid=e.adbuid,a.adbbuid=e.adbbuid,r.addBidResponse(e.placementCode,a)}}var o=window.location.protocol+"//tag.contextweb.com/getjs.static.js",s=window.location.protocol+"//bid.contextweb.com/header/tag";return{callBids:e}};t.exports=a},{"../adloader.js":13,"../bidfactory.js":14,"../bidmanager.js":15}],6:[function(e,t,n){var i=e("../utils"),r=e("../bidfactory.js"),d=e("../bidmanager.js"),a=(e("../adloader"),e("../adbridg/analytics"),0),o=function(e,t){var n=i.createInvisibleIframe(!0);(document.body||document.head).appendChild(n),n.contentDocument.write("<!DOCTYPE html><html><head></head><body></body></html>"),n.contentDocument.close();var r=n.contentDocument.createElement("script");r.async=!0,r.type="text/javascript",r.src="http://apex.go.sonobi.com/trinity.js?key_maker="+JSON.stringify(e)+"&s="+Math.floor(1e3*Math.random()),r.readyState?r.onreadystatechange=function(){("loaded"==r.readyState||"complete"==r.readyState)&&(r.onreadystatechange=null,t(n.contentWindow.sbi_trinity,n.contentWindow.sbi_dc),n.parentNode.removeChild(n))}:r.onload=function(){t(n.contentWindow.sbi_trinity,n.contentWindow.sbi_dc),n.parentNode.removeChild(n)},n.contentDocument.head.appendChild(r)},s=function(){function e(e){var t=r.createBid(2);t.bidderCode="sonobi",t.adbuid=e.adbuid,t.adbbdr=e.adbbdr,t.adbbuid=e.adbbuid,d.addBidResponse(e.placementCode,t)}function t(t,n,i){var a=parseFloat(n.sbi_mouse);if(!a||0>=a)return void e(t);var o=r.createBid(1),s=n.sbi_size.split("x"),u="http://"+i+"apex.go.sonobi.com/sbi.js?as=dfp&aid="+n.sbi_aid;o.bidderCode="sonobi",o.ad='<script type="text/javascript" src="'+u+'"></script>',o.cpm=a,o.width=parseInt(s[0],10),o.height=parseInt(s[1],10),o.adbbdr=t.adbbdr,o.adbuid=t.adbuid,o.adbbuid=t.adbbuid,o.adbinfo=[1,i,n.sbi_aid,n.sbi_apoc].join(","),d.addBidResponse(t.placementCode,o)}return{callBids:function(e){var n={},r={};i._each(e.bids,function(e,t){a+=1;var i="adbs-"+a;n[i]=e,r[i]=e.params.pid}),o(r,i.tryBidHandler(function(e,r){i._each(e,function(e,d){var a=n[d]||!1;return a?void t(a,e,r):void i.logError("Sonobi received unmatched key: "+d)})}))}}};t.exports=s},{"../adbridg/analytics":8,"../adloader":13,"../bidfactory.js":14,"../bidmanager.js":15,"../utils":18}],7:[function(e,t,n){function i(e,t){e=String(e),l[e]&&(l[e].bidResponse=t)}function r(){o._each(l,function(e,t){if(e.bidResponse)u.addBidResponse(e.placementCode,e.bidResponse);else if(g){var n=s.createBid(2);n.bidderCode="sovrn",n.cpm=0,n.timeToRespond=g,n.adbbdr=e.bidRequest.adbbdr,n.adbuid=e.bidRequest.adbuid,n.adbbuid=e.bidRequest.adbbuid,n.width=e.bidRequest.width,n.height=e.bidRequest.height,u.addBidResponse(e.placementCode,n)}}),g=!1}var d,a=e("../constants.json"),o=e("../utils.js"),s=e("../bidfactory.js"),u=e("../bidmanager.js"),c=e("../adloader"),l={},g=!1,f=!1,p=o.tryBidHandler(function(){var e=document.createElement("img");e.src=f}),h=function(e,t){f||(f="//gslbeacon.lijit.com/beacon?viewId="+e+"_auction_api&rand="+(Math.round(8998*Math.random())+1e3)+"&informer="+t+"&type=fpads&loc="+encodeURIComponent(window.location.hostname)+"&v=1.2","complete"==document.readyState?setTimeout(p,100):document.addEventListener?document.addEventListener("readystatechange",function(){"complete"==document.readyState&&(document.removeEventListener("readystatechange",arguments.callee),p())}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),p())}))},b=function(){function e(e){var i=e.bids||[];n(t(i))}function t(e){var t,n={},i=[];e.forEach(function(e){n[o.getBidIdParamater("tagid",e.params)]=e});for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);return i}function n(e){var t=window.location.host,n=window.location.pathname+location.search+location.hash,i=[];o._each(e,function(e){var t=o.getBidIdParamater("tagid",e.params),n=e.params.width,r=e.params.height;e.params.puser&&h(e.params.puser,e.params.pinformid),imp={id:o.getUniqueIdentifierStr(),banner:{w:n,h:r},tagid:t},i.push(imp),u.pbCallbackMap[imp.id]=e,l[String(imp.id)]={bidRequest:e,bidResponse:null,placementCode:e.placementCode}});var r={id:o.getUniqueIdentifierStr(),imp:i,site:{domain:t,page:n}};d=(new Date).getTime(),g=!1;var a="//"+f+"?callback=window.AdBridg.__sovrnResponse&br="+encodeURIComponent(JSON.stringify(r));c.loadScript(a,null)}var f="ap.lijit.com/rtb/bid";return window.AdBridg.__sovrnResponse=o.tryBidHandler(function(e){g=(new Date).getTime()-d,e&&e.id&&e.seatbid&&0!==e.seatbid.length&&e.seatbid[0].bid&&0!==e.seatbid[0].bid.length&&e.seatbid[0].bid.forEach(function(t){var n,r="",d=t.impid,o=u.getPlacementIdByCBIdentifer(d);if(o&&(r=o.placementCode,o.status=a.STATUS.GOOD,n=parseFloat(t.price),0!==n)){t.placementCode=r,t.size=o.sizes;var c=t.adm,l='<img src="'+t.nurl+'">',g=s.createBid(1);g.creative_id=t.id||"0",g.bidderCode="sovrn",g.cpm=n,g.width=o.params.width,g.height=o.params.height,g.ad=decodeURIComponent(c+l),g.adbbdr=o.adbbdr,g.adbuid=o.adbuid,g.adbbuid=o.adbbuid,g.adbinfo=[e.id,t.impid,t.id].join(","),i(d,g)}}),r()}),{callBids:e}};t.exports=b},{"../adloader":13,"../bidfactory.js":14,"../bidmanager.js":15,"../constants.json":16,"../utils.js":18}],8:[function(e,t,n){var i,r=e("../utils"),d=(e("../prebid"),e("../adloader")),a=e("./configuration"),o=e("./proxy"),s=1,u=2,c=3,l={id:1,units:{},bidders:{},bids:{},winners:{},noconf:[]},g=function(){l={id:++l.id,units:{},bidders:{},bids:{},winners:{},noconf:[]}},f=1,p=function(){return{loading:1,interactive:2,complete:3}[document.readyState]||0},h=function(){var e=(new Date).getTime();try{_base_timing=Math.round(performance.now()),e-=_base_timing,h=function(){return p()+"T"+Math.round(performance.now()).toString(36)},i=[f,e.toString(36),h()]}catch(t){f=0,h=function(){return p()+"T"+Math.max(0,(new Date).getTime()-e).toString(36)},i=[f,e.toString(36),p()+"T0"]}};h(),document.addEventListener?document.addEventListener("readystatechange",function(){3==p()&&document.removeEventListener("readystatechange",arguments.callee),i.push(h())}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){3==p()&&document.detachEvent("onreadystatechange",arguments.callee),i.push(h())});var b=function(){for(var e="",t=0;10>t;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e},m=b(),v=String((document.cookie.match(/_adb=([^;]+)/)||[]).pop());v&&"a2"==v.substr(0,2)||(document.cookie="_adb=; expires="+new Date(1970).toGMTString(),v="a2"+(new Date).getTime().toString(36)+b());var _=new Date;_.setTime(_.getTime()+31536e6),document.cookie="_adb="+v+"; expires="+_.toGMTString()+"; path=/";var y,B=0,w={},A=!1,I=function(){clearTimeout(y);var e=[];return r._each(w,function(t,n){e.push(n+":"+t.p+":"+t.d.join(","))}),w={},B=0,e.join("&e=")},S=function(e,t,n,i){clearTimeout(y);var d=e+"."+t;w[d]||(w[d]={p:h(),d:[]}),w[d].d.push(escape(JSON.stringify(n))),B+=1,y=setTimeout(C,2e3),i&&(A=!0,r.logError(i),A=!1)},C=function(){x(c,1,l.id+"//"+B)},x=function(e,t,n){var o=[2,v,m].join(","),s=I(),u="https:"==document.location.protocol?5051:5050,c="//adspsp.com:"+u+"/pt/"+a.getClientId()+"/"+e+"/"+t+"/?a="+o+"&b="+n+"&e="+s+"&c="+encodeURIComponent(r.getTopWindowUrl())+"&d="+encodeURIComponent(r.getTopWindowRef())+"&f="+i.join(".")+"&g="+h();d.trackPixel(c)},T=function(e){return String(e).replace(/[^\d\w]/,"")},E=function(e){var t,n,i,r;for("object"!=typeof e[0]&&(e=[e]),i=[],t=0;t<e.length;++t){for(r=[],n=0;n<e[t].length;++n)r.push((parseInt(e[t][n],10)||0).toString(36));i.push(r.join("`"))}return i.join(".")},D=function(e,t){return e+"^"+E(t)},P=function(e,t,n){var i,d;return d=[],r._each(t.bids,function(t,a){i=[],r._each(t,function(t,r){return n&&!n[a+"."+r]?void F(a,e,t):void i.push(t)}),d.push(a+"@"+i.join("~"))}),e+"^"+E(t.gpt_sizes)+":"+d.join(",")},R=function(e){return Math.floor(1e4*e).toString(36)},j=function(e,t,n,i,r){var d;return d=e+"@"+t.toString(36),1==e&&(d+="^"+E(i)+"~"+R(r)),d};n.biddingUnit=function(e,t){var n,i,d,a,o;n=e.adbuid,l.units[n]&&q(P(n,l.units[n])),d={},r._each(e.bids,function(e){i=e.adbbdr,a=T(e.adbbuid),d[i]=d[i]||{},o=D(a,e.adbsize),d[i][a]=o,l.bidders[i]=l.bidders[i]||{},l.bidders[i][a]&&k(i,n,l.bidders[i][a]),l.bidders[i][a]=o,l.bids[n]=l.bids[n]||{},l.bids[n][i+"."+a]={info:!1,encoded_bid_string:j(3,-1)}}),l.units[n]={gpt_sizes:t,bids:d}},n.biddingStarted=function(e){var t,n,i,d;return t=[],i={},r._each(e,function(e){return n=a.getBidderidFromAdapterCode(e.bidderCode),n&&l.bidders[n]?void r._each(e.bids,function(e){var t=T(e.adbbuid);return encoded_bid_string=D(t,e.adbsize),i[n+"."+t]=1,l.bidders[n][t]?void(encoded_bid_string!=l.bidders[n][t]&&(G(n,unitid,encoded_bid_string),l.units[unitid].bids[n][t]=encoded_bid_string)):void N(n,unitid,encoded_bid_string)}):(d=[],r._each(e.bids,function(e){d.push(D(T(e.adbbuid),e.adbsize))}),void M(n,e.bidderCode,d))}),r._each(l.units,function(e,n){t.push(P(n,e,i))}),l.noconf.length&&U(l.noconf),t.length>10?void O(t.length,t.join("`")):void x(s,1,l.id+"//"+t.length+"-"+t.join("_"))},n.winningUnitBid=function(e){var t;t=a.getUnitidFromPlacementCode(e.adUnitCode),l.winners[t]=e.adbbdr+"."+T(e.adbbuid)},n.biddingComplete=function(e){var t,n,i,d;r._each(l.units,function(o,s){return t=a.getPlacementCodeFromUnitid(s),e[t]?void r._each(e[t].bids,function(e){if(n=e.adbbdr+"."+T(e.adbbuid),d=e.size?e.size.split("x"):[0,0],i=j(e.statusCode,e.timeToRespond,e.adId,d,e.cpm),l.bids[s][n]){var t=e.adbinfo?escape(e.adbinfo):!1;l.bids[s][n]={info:t,encoded_bid_string:i}}else H(s,n,i)}):void z(s)})},n.adsDelivered=function(e){var t,n,i,d=[];r._each(e,function(e,o){if(t=a.getUnitidFromPlacementCode(o),!t)return void L(o,e.isEmpty);e.isEmpty?(unit_delivery_descriptor="!",J(t)):(n=l.winners[t],n?unit_delivery_descriptor=n:unit_delivery_descriptor="?",unit_delivery_descriptor+="^"+E(e.size)+"/"+Number(e.lineItemId).toString(36)+"."+Number(e.creativeId).toString(36)),i=[],r._each(l.bids[t],function(e,t){t==n&&e.info&&(unit_delivery_descriptor+="~`"+e.info+"`"),i.push(t+"-"+e.encoded_bid_string)});var s=t+"@"+unit_delivery_descriptor+":"+i.join(",");d.push(s)});var o=l.id+"//"+d.join("_");x(u,2,o)},n.reset=function(){g()},n.noUnitConfig=function(e){l.noconf.push(e)};var U=function(e){S(101,1,e,"AdBridg misconfiguration: no config defined for units "+e.join(", "))};n.noUnitBidders=function(e){S(102,1,e,"AdBridg misconfiguration: no bidders defined for "+e)},n.missingBidders=function(e){S(103,1,e,"This AdBridg installation does not support bidderids "+e)},n.unsupportedBidder=function(e,t){S(104,1,[e,t],"AdBridg does not support bidder yet: "+t)};var q=function(e){S(105,1,e,"AdBridg detected a duplicate bid config for unit "+e)},k=function(e,t,n){S(106,1,[e,t,n],"AdBridg detected a duplicate bidder config for bidder unit "+n)};n.nothingToDo=function(){S(107,1,0,"AdBridg cannot execute: no ads have been defined")},n.refreshUnknown=function(e,t,n){S(108,1,[e,t?1:0,n?1:0],"AdBridg was asked to refresh an unknown slot: "+e+" (gpt-known="+t+", bid-config="+n+")")},n.unknownDomId=function(e){S(201,1,e,"AdBridg received an unregistered domid: "+e)},n.missingPlaceholders=function(e,t,n,i,r){S(202,21,[e,t,n,i,r],"AdBridg did not receive display() calls for "+(1==t?"bidding":"traditional")+" units: "+r.join(", "))},n.noPlaceholders=function(e){S(203,1,e,"AdBridg could not render any "+(1==e?"bidding":"traditional")+" units!")};var M=function(e,t,n){S(301,1,[e,t,n])},N=function(e,t,n){S(302,1,[e,t,n])},G=function(e,t,n){S(303,1,[e,t,n])},O=function(e,t,n){S(304,1,[e,t,n])},F=function(e,t,n){S(305,1,[e,t,n])},z=function(e){S(306,1,e,"AdBridg auction results are missing bids on unit "+e)},H=function(e,t,n){S(307,1,[e,t,n])};n.timedOut=function(e){S(308,1,e,"AdBridg detected global timeout (@"+a.getGlobalTimeout()+"ms) happened while "+e+" bids still pending")},n.latencyBids=function(e){var t=a.getGlobalTimeout().toString(36);S(309,1,[t,e])},n.deliveredUnknownSlot=function(e,t,n,i){S(401,1,[e,t,n,i?1:0])},n.undeliveredAds=function(e,t){S(402,1,[e,t],"AdBridg did not detect GPT delivery for "+(1==e?"bidding":"traditional")+" slots: "+t.join(", "))};var L=function(e,t){S(403,1,[e,t?1:0])},J=function(e){S(404,1,e,"AdBridg received no ad from DFP for unitid "+e)};n.bidderDebug=function(e){S(405,1,e)},n.pbjsError=function(e){A||S(501,1,e)},n.preBidError=function(e){S(502,1,e,"AdBridg caught a pre-bid error: "+e)},n.postBidError=function(e){S(503,1,e,"AdBridg caught a post-bid error: "+e)},n.refreshError=function(e){S(504,1,e,"AdBridg caught a refresh error: "+e)},n.xtypeError=function(e){S(601,1,e,"AdBridg received an error in Xtype: "+e)},n.adbtg=function(e){S(701,1,e)},o.setAnalytics(n)},{"../adloader":13,"../prebid":17,"../utils":18,"./configuration":9,"./proxy":12}],9:[function(e,t,n){var i=e("../utils"),r=e("../adaptermanager"),d=e("./analytics"),a={id:"1339625",adapters:{8:{server:"adserver.adtechus.com",network:"10279.1",adjust:.8},9:{puser:"sitepoint1",pinformid:13386399},12:{adjust:.8},13:{network:560099}},timeout:2500,units:{"/7448792/SP2013_Home_300x250_1":[1,[[8,[300,250],3715432,"Home_300x250_1",170],[9,[300,250],322020],[10,[300,250],1,170451],[12,[],7645813],[13,[300,250],452942]]],"/7448792/SP2013_Home_300x250_3":[2,[[8,[300,250],3715434,"Home_300x250_3",170],[9,[300,250],322e3],[10,[300,250],2,176166],[12,[],7645802],[13,[300,250],452944]]],"/7448792/SP2013_Home_300x250_5":[3,[[8,[300,250],3715436,"Home_300x250_5",170],[9,[300,250],322021],[10,[300,250],3,176167],[12,[],7645829],[13,[300,250],452624]]],"/7448792/SP2013_Channel_728x90_1":[4,[[8,[728,90],3715437,"Channel_728x90_1",225],[9,[728,90],321999],[10,[728,90],4,176168],[12,[],7645774],[13,[728,90],452623]]],"/7448792/SP2013_Channel_300x250_1":[5,[[8,[300,250],3715432,"Channel_300x250_1",170],[9,[300,250],322020],[10,[300,250],5,176169],[12,[],7645813],[13,[300,250],452942]]],"/7448792/SP2013_Channel_300x250_3":[6,[[8,[300,250],3715434,"Channel_300x250_3",170],[9,[300,250],322e3],[10,[300,250],6,176170],[12,[],7645802],[13,[300,250],452944]]],"/7448792/SP2013_Channel_300x250_5":[7,[[8,[300,250],3715436,"Channel_300x250_5",170],[9,[300,250],322021],[10,[300,250],7,176171],[12,[],7645829],[13,[300,250],452624]]],"/7448792/SP2013_Articles_728x90_1":[8,[[8,[728,90],3715437,"Articles_728x90_1",225],[9,[728,90],321999],[10,[728,90],8,176172],[12,[],7645774],[13,[728,90],452623]]],"/7448792/SP_Articles_728x90_Bottom":[9,[[8,[728,90],3715435,"Articles_728x90_Bottom",225],[9,[728,90],322022],[10,[728,90],9,176173],[13,[728,90],452945]]],"/7448792/SP2013_Articles_300x250_1":[10,[[8,[300,250],3715432,"Articles_300x250_1",170],[9,[300,250],322020],[10,[300,250],10,176174],[12,[],7645813],[13,[300,250],452942]]],"/7448792/SP2013_Articles_300x600_1":[11,[[8,[300,600],3715438,"Articles_300x600_1",529],[8,[160,600],3715433,"Articles_160x600_Flex",154],[8,[300,250],3715436,"Articles_300x250_Flex",170],[9,[300,600],322002],[9,[160,600],322011],[9,[300,250],322021],[10,[300,600],111,176657],[10,[160,600],112,176658],[10,[300,250],113,176659],[12,[],7645806],[12,[],7645809],[12,[],7645829],[13,[300,600],452625],[13,[160,600],452941],[13,[300,250],452624]]],"/7448792/SP_Home_Leaderboard_1":[12,[[8,[728,90],3715437,"Home_728x90_1",225],[9,[728,90],321999],[9,[970,90],379206],[10,[728,90],8,176172],[10,[970,90],15,181692],[12,[],7645774],[12,[],9286531],[13,[728,90],452623],[13,[970,90],486569]]],"/7448792/SP_Home_Leaderboard_2":[13,[[8,[728,90],4196693,"Home_728x90_2",225],[9,[728,90],379577],[9,[970,90],379579],[10,[728,90],4,176168],[10,[970,90],16,181693],[12,[],9286499],[12,[],9286542],[13,[728,90],486567],[13,[970,90],486570]]],"/7448792/SP_Home_Leaderboard_3":[14,[[8,[728,90],4196694,"Home_728x90_3",225],[9,[728,90],379578],[9,[970,90],379581],[10,[728,90],9,176173],[10,[970,90],17,181694],[12,[],9286510],[12,[],9286543],[13,[728,90],486568],[13,[970,90],486731]]],"/7448792/SP_Home_HalfPage_1":[15,[[8,[160,600],3715433,"Home_Flex_160x600",154],[8,[300,250],3715436,"Home_Flex_300x250",170],[8,[300,600],3715438,"Home_Flex_300x600",529],[9,[160,600],322011],[9,[300,250],322021],[9,[300,600],322002],[10,[160,600],112,176658],[10,[300,250],113,176659],[10,[300,600],111,176657],[12,[],7645809],[12,[],7645813],[12,[],7645806],[13,[160,600],452941],[13,[300,250],452642],[13,[300,600],452625]]],"/7448792/SP_Channel_Leaderboard_1":[16,[[8,[728,90],3715437,"Home_728x90_1",225],[9,[728,90],321999],[9,[728,90],379206],[10,[728,90],8,176172],[10,[970,90],15,181692],[12,[],7645774],[12,[],9286531],[13,[728,90],452623],[13,[970,90],486569]]],"/7448792/SP_Channel_Leaderboard_2":[17,[[8,[728,90],4196693,"Home_728x90_2",225],[9,[728,90],379577],[9,[970,90],379579],[10,[728,90],4,176168],[10,[970,90],16,181693],[12,[],9286499],[12,[],9286542],[13,[728,90],486567],[13,[970,90],486570]]],"/7448792/SP_Channel_Leaderboard_3":[18,[[8,[728,90],4196694,"Home_728x90_3",225],[9,[728,90],379578],[9,[970,90],379581],[10,[728,90],9,176173],[10,[970,90],17,181694],[12,[],9286510],[12,[],9286543],[13,[728,90],486568],[13,[970,90],486731]]],"/7448792/SP_Channel_Leaderboard_4":[19,[[8,[728,90],3715435,"Articles_728x90_Bottom",225],[9,[728,90],322022],[9,[970,90],379582],[10,[728,90],14,181691],[10,[970,90],18,181695],[12,[],9286530],[12,[],9286550],[13,[728,90],452945],[13,[970,90],486573]]]}},o={test:1,rubicon:2,pubmatic:3,openx:4,appnexus:5,criteo:6,amazon:7,aol:8,sovrn:9,index:10,sonobi:11,cpxi:12,pulsepoint:13},s={};i._each(o,function(e,t){s[""+e]=t});var u=function(e){return s[""+e]||0};n.getBidderidFromAdapterCode=function(e){return o[e]||0};var c=function(e,t){return(a.adapters[String(e)]||{})[t]};n.getGlobalTimeout=function(){return n.forcedBidder()?1e4:a.timeout};var l={};i._each(a.units,function(e,t){l[e[0]]=t}),n.getClientId=function(){return a.id},n.getUnitidFromPlacementCode=function(e){return(a.units[e]||[0])[0]},n.getPlacementCodeFromUnitid=function(e){
return l[e]||0},n.forcedBidder=function(){return(String(window.location.search).match(/adb_force_bidder=(\d+)/)||[]).pop()},n.allowsBidder=function(){return(String(window.location.search).match(/adb_allow_bidder=(\d+)/)||[]).pop()};var g=function(e){try{for(var t=1,n=((document.cookie.match(/_adbv=([a-z0-9.-]+)/)||[]).pop()||"").split("."),i=0;i<n.length;++i){var r=n[i].split("-"),d=parseInt(r[0],36),a=parseInt(r[1],36);if(d==Number(e))return Math.max(.05,t*(a/100))}}catch(o){}return.05},f=function(e,t){var n=Math.floor(e/t)*t;return Math.max(.01,n).toFixed(2)+"-"+(n+t-.01).toFixed(2)};n.getPbjsBidderSettings=function(){return{standard:{adserverTargeting:[{key:"adb_adid",val:function(e){return e.adId}},{key:"adb_hbc",val:function(e){if(n.forcedBidder())return"";var t=e.cpm;return 9.95>t?f(t,.05):"9.95-"}},{key:"adb_bdr",val:function(e){return n.forcedBidder()?"force":e.bidder}}]}}},n.getPbjsUnitConfiguration=function(e,t,o,s){var l,f,p,h,b,m,v,_,y,B,w;if(f=a.units[e],!f)return d.noUnitConfig(e),!1;s=s||{},p={adbuid:f[0],code:e,bids:[]},h=[],b=[t];var A=parseInt(n.forcedBidder(),10),I=parseInt(n.allowsBidder(),10),S=g(f[0]);for(l=0;l<f[1].length;++l)if(m=f[1][l],_=m[0],B=m[1],y=m[2],v=u(_),!A||A==_)if(r.hasAdapter(v)){if(!c(_,"_force")||A==_||I==_){switch(w={},v){case"test":break;case"aol":w={adContainerId:o,server:c(_,"server"),network:c(_,"network"),adjust:c(_,"adjust"),placement:y,alias:m[3],sizeId:m[4],bidFloor:S};break;case"sovrn":w={tagid:y,width:B[0],height:B[1],puser:c(_,"puser"),pinformid:c(_,"pinformid")};break;case"index":w={id:y,width:B[0],height:B[1],siteID:m[3],timeout:1500};break;case"sonobi":w={pid:y};break;case"appnexus":case"cpxi":w={placementId:y,adjust:c(_,"adjust")};break;case"pulsepoint":w={cf:B.join("X"),cp:c(_,"network"),ct:y};break;default:d.unsupportedBidder(_,v);continue}b.push(B),p.bids.push({adbuid:f[0],adbbdr:_,adbbuid:y,adbsize:B,bidder:v,params:w})}}else h.push(_);return h.length&&d.missingBidders(h),p.bids.length?(p.sizes=i.combineSizeInputs.apply(null,b),p):(d.noUnitBidders(e),!1)}},{"../adaptermanager":1,"../utils":18,"./analytics":8}],10:[function(e,t,n){function i(){var e;a.bidderTimeout=o.getGlobalTimeout(),AdBridg.cmd.push=function(e){if(typeof e===l)try{e.call()}catch(t){d.logError("Error processing AdBridg command: "+(t.stack||t.message)),l===!1&&s.xtypeError(t.stack||t.message)}else d.logError("Commands written into AdBridg.cmd.push must wrapped in a function")},e=o.getPbjsBidderSettings(),e&&(a.bidderSettings=e),googletag.pubads().addEventListener("slotRenderEnded",function(e){u.gptSlotRendered(e)}),r()}function r(){for(;AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}}var d=e("../utils"),a=e("../prebid"),o=e("./configuration"),s=e("./analytics"),u=e("./gpt-workflow"),c=e("./proxy"),l="function";if(window.AdBridg=window.AdBridg||{},AdBridg.cmd=AdBridg.cmd||[],!googletag||!googletag.cmd||googletag.cmd!==AdBridg.cmd){AdBridg.exists=!0;AdBridg.defineSlot=function(e,t,n,i){var r,a,s;return(a=u.getSlot(n))?(d.logError("AdBridg received a duplicate definition for slot/dom_id "+e+"/"+n),a.gpt_slot):(r=o.getPbjsUnitConfiguration(e,t,n,i),s=c.useGPT().defineSlot(e,t,n).addService(googletag.pubads()),u.storeSlot(e,n,r,s,t),s)},AdBridg.display=function(e){u.publisherCalledDisplay(e)};var g=!1;AdBridg.serve=function(e){if(g)return void d.logError("AdBridg attempting to serve more than once");g=!0;var t=u.getPbjsArray();a.addAdUnits(t),e=typeof e==l?e:function(){d.debugTurnedOn()&&console.log("AdBridg Result: ",arguments)},e=d.tryBidHandler(e),u.execute(e)},AdBridg.render=function(e,t){a.renderAd(e,t)},AdBridg.refresh=function(e){try{d.isArray(e)||(e=[e]);var t=[],n=!1;d._each(e,function(e){var i=e.getAdUnitPath(),r=e.getSlotElementId();return adb_slot=u.getSlot(r),adb_slot&&adb_slot.pbjs_config?void(adb_slot.queueRefresh()&&(n=!0)):(s.refreshUnknown(i+"/"+r,!!adb_slot,!(!adb_slot||!adb_slot.pbjs_config)),void t.push(e))}),t.length&&c.useGPT().pubads().refresh(t),n&&u.refresh()}catch(i){s.refreshError(i.stack||i.message)}},window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){try{i()}catch(e){s.preBidError(e.stack||e.message)}}),AdBridg.use_gpt_original=function(e){c.setGPT(e)}}},{"../prebid":17,"../utils":18,"./analytics":8,"./configuration":9,"./gpt-workflow":11,"./proxy":12}],11:[function(e,t,n){function i(e){var t={};e.listen=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.forget=function(){t={}},e.trigger=function(n){var i=t[n]||[],r=Array.prototype.slice.call(arguments);r.unshift(e),u._each(i,function(e){e.apply(null,r)}),"destroy"==n&&(t={},e.listen=null,e.trigger=null)}}var r,d,a,o,s,u=e("../utils"),c=e("../prebid"),l=e("./analytics"),g=(e("./configuration"),e("./proxy")),f=5e3,p=500,h=1,b=2,m=3,v=4,_=0,y=1,B=2,w=3,A=1,I=2,S=function(){},C=!1,x=!1,T=!1,E=!1,D=!1;n.getSlot=function(e){return r.getSlotByDomId(e)},n.storeSlot=function(e,t,i,o,s){var c=n.getSlot(t);if(c)return u.logError("AdBridg received duplicate definition for slot/dom_id "+e+"/"+t),c.gpt_slot;!j(v)&&i&&l.biddingUnit(i,s);var c=new N(e,t,i,o),g=i?d:a;g.addSlot(c),r.addSlot(c)},n.getPbjsArray=function(){return d.getPbjsConfigurationArray()};var P=0,R=!1;n.refresh=function(){j(v)&&o.requestPbjs()},n.execute=function(e){if(s!=v){if(d.getCount()&&a.getCount())s=m,u.logMessage("AdBridg is executing mixed mode");else if(d.getCount())s=h,u.logMessage("AdBridg is executing bidding mode");else{if(!a.getCount())return void l.nothingToDo();s=b,u.logMessage("AdBridg is executing traditional mode")}"function"==typeof e&&(S=e),"complete"==document.readyState?(P=1,AdBridg.cmd.push(k)):document.addEventListener?document.addEventListener("readystatechange",function(){"loading"!=document.readyState&&(document.removeEventListener("readystatechange",arguments.callee),P=2,AdBridg.cmd.push(k))}):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),P=3,AdBridg.cmd.push(k))}),R||(c.addCallback("allRequestedBidsBack",q),R=!0),j(m,h)&&(d.listen("reported",M),d.listen("slots_activated",function(){C&&d.requestAds()}),c.requestBids()),j(m)&&(googletag.pubads().disableInitialLoad(),E=!0),j(b)&&S.call(null,!1),j(m,b)&&(a.listen("reported",M),a.listen("slots_activated",a.requestAds),U())}},n.publisherCalledDisplay=function(e){var t=r.getSlotByDomId(e);return t?(t.activate(),j(v)?(t.queueRefresh(!0),void n.refresh()):void 0):void l.unknownDomId(e)},n.gptSlotRendered=function(e){var t=r.findGPTSlot(e.slot);return t?void t.render(e):void l.deliveredUnknownSlot(gpt_event.creativeId,gpt_event.lineItemId,gpt_event.size,gpt_event.isEmpty)};var j=function(){for(var e=0;e<arguments.length;++e)if(arguments[e]==s)return!0;return!1},U=function(){T||(T=!0,g.useGPT().enableServices(),r.each(function(e){e.activated&&g.useGPT().display(e.dom_id)}))},q=function(){if(!C){C=!0;var e=(j(v)?o:d,c.getBidResponses());l.biddingComplete(e),S(e),j(m,h,v)&&c.setTargetingForAdUnitsGPTAsync(),j(h)&&U(),j(m)&&x&&d.requestAds(),j(v)&&o.requestAds()}},k=function(){x=!0,j(m)?(a.requestAds(),C&&d.requestAds()):j(b)?a.renderTimeout(f):j(h)&&d.renderTimeout(f)},M=function(){if((!j(m)||d.reported&&a.reported)&&!D){D=!0;var e=j(v)?o:r,t=e.getDeliveredSlots(),n=e.getDeliveredSlotCodes();n.length&&l.adsDelivered(t),u.logMessage("AdBridg observed "+n.length+" GPT unit renderings: "+n.join(", "));var i=e.getEmptySlotCodes();i.length&&u.logMessage("(of those, "+i.length+" rendered empty: "+i.join(", ")+")"),C=!1,s=v}},N=function(e,t,n,r){this.placement_code=e,this.dom_id=t,this.pbjs_config=n,this.gpt_slot=r,this.activated=!1,this.halfactivated=!1,this.rendered=!1;var d=this;i(this),this.pbjs_config&&this.gpt_slot.setTargeting("adb_bdr","none");var a=function(e,t,n){e.style.width&&String(e.style.width).replace("px","")!=t&&(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")!=n&&(e.style.height=n+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=n&&e.setAttribute("height",n)};this.resizeContainer=function(e,t){var n=document.getElementById(d.dom_id),i=n.getElementsByTagName("div"),r=n.getElementsByTagName("iframe"),o=RegExp("^google_ads_iframe_/"+d.placement_code);u._each(i,function(n){var i=String(n.id);i.match(o)&&!i.match("_hidden_")&&a(n,e,t)}),u._each(r,function(n){var i=String(n.id);i.match(o)&&!i.match("_hidden_")&&a(n,e,t)})},this.activate=function(){d.activated=!0,T&&!j(v)&&d.callDisplay(),d.trigger("activate")},this.queueRefresh=function(e){if(e)d.halfactivated=!0;else if(!d.rendered)return u.logMessage("AdBridg ignored refresh request for "+d.placement_code+" because it has not yet rendered the last request."),!1;return d.forget(),d.rendered=!1,o.addSlot(d),!0},this.callDisplay=function(){g.useGPT().display(d.dom_id),j(v)&&E&&g.useGPT().pubads().refresh([d.gpt_slot]),d.halfactivated=!1},this.clearTargeting=function(){var e=[],t=d.gpt_slot.getTargetingMap();for(var n in t)"adb_hbc"!=n&&"adb_bdr"!=n&&"adb_adid"!=n&&e.push([n,t[n]]);d.gpt_slot.clearTargeting();for(var i=0;i<e.length;++i)d.gpt_slot.setTargeting(e[i][0],e[i][1]);d.gpt_slot.setTargeting("adb_bdr","none")},this.render=function(n){return d.rendered?void u.logMessage("AdBridg received two render() calls for unit "+e+" with DOM ID "+t):(d.rendered={creativeId:n.creativeId||0,lineItemId:n.lineItemId||0,size:n.size,isEmpty:n.isEmpty},void d.trigger("render"))}},G=function(e){this.reported=!1;var t=[],r={},d=0,a=0,B=0,S=!1,C=!1,x=!1,T=!1,E=this,R=[];i(this),this.getSlots=function(){return r};var U=function(e){return C?void u.logMessage("AdBridg slot activated after ads requested: ",e.placement_code):(a+=1,void(E.isActivated()&&E.trigger("slots_activated")))},q=function(e){j(h,b)&&k(I),B||E.clearTargeting(),B+=1,E.renderTimeout(p)},k=function(t){if(!x&&e!=_&&e!=w){x=!0;var n=E.getInactiveSlotCodes();n.length&&(l.missingPlaceholders(s,e,t,P,n),n.length==d&&l.noPlaceholders(e)),j(h,b)&&u.logMessage("AdBridg requested "+a+" "+(e==y?"bidding":"traditional")+" units from GPT: "+E.getActiveSlotCodes())}};this.each=function(e){u._each(r,e)},this.isActivated=function(){return d==a},this.isRendered=function(){return d&&d==B},this.addSlot=function(n){if(e==w&&(!j(v)||!this.isRendered()&&(S||C))){for(var i=0;i<R.length;++i)if(R[i]===n)return;return void R.push(n)}t.push(n),r[n.dom_id]=n,d+=1,n.listen("activate",U),n.listen("render",q)},this.requestPbjs=function(){if(!S&&!C){for(;R.length;)E.addSlot(R.shift());var e=[];l.reset(),u._each(E.getSlots(),function(t){t.pbjs_config&&(e.push(t.pbjs_config),l.biddingUnit(t.pbjs_config,t.pbjs_config.sizes))}),S=!0,e.length?c.requestBidsForAdUnits(e):E.requestAds()}},this.requestAds=function(){if(!C&&e!=_){if(C=!0,j(v)&&e==w){D=!1;var t=E.getActivatedGPTSlots();t.length&&(u.logMessage("AdBridg is requesting "+t.length+" refresh units from GPT: "+E.getActiveSlotCodes()),g.useGPT().pubads().refresh(t)),E.each(function(e){e.halfactivated&&e.callDisplay()})}if(j(m)){k(A);var t=E.getActivatedGPTSlots();t.length&&(u.logMessage("AdBridg is requesting "+t.length+" "+(e==y?"bidding":"traditional")+" units from GPT: "+E.getActiveSlotCodes()),g.useGPT().pubads().refresh(t,{changeCorrelator:!1}))}E.renderTimeout(f)}},this.renderTimeout=function(e){clearTimeout(T),E.isRendered()?E.reportRender():T=setTimeout(E.reportRender,e)},this.reportRender=function(){if(clearTimeout(T),!E.reported&&e!=_){var t=E.getUndeliveredSlotCodes();if(t.length&&l.undeliveredAds(e,t),E.reported=!0,E.trigger("reported"),e==w&&(M(),E.forget(),r=!1,o=new G(w),R.length)){for(;R.length;)o.addSlot(R.shift());u.logMessage("Next round of refreshes queued for 500ms: "+o.getActiveSlotCodes().join(", ")),setTimeout(u.tryBidHandler(n.refresh),500)}}},this.findGPTSlot=function(e){var t;for(dom_id in r)if(r.hasOwnProperty(dom_id)&&(t=r[dom_id],t.gpt_slot===e))return t;return!1},this.getCount=function(){return d},this.getSlotByDomId=function(e){return r[e]||!1},this.getNewestSlotByPlacementCode=function(e){for(var n=t.length-1;n>=0;--n)if(t[n].placement_code==e)return t[n];return!1},this.getPbjsConfigurationArray=function(){var e=[];return E.each(function(t){t.pbjs_config&&e.push(t.pbjs_config)}),e},this.getInactiveSlotCodes=function(){var e=[];return E.each(function(t,n){t.activated||e.push(t.placement_code)}),e},this.getActiveSlotCodes=function(){var e=[];return E.each(function(t,n){t.activated&&!t.halfactivated&&e.push(t.placement_code)}),e},this.getActivatedGPTSlots=function(){var e=[];return E.each(function(t,n){t.activated&&!t.halfactivated&&e.push(t.gpt_slot)}),e},this.getUndeliveredSlotCodes=function(){var e=[];return E.each(function(t,n){t.activated&&!t.rendered&&e.push(t.placement_code)}),e},this.getDeliveredSlotCodes=function(){var e=[];return E.each(function(t,n){t.rendered&&e.push(t.placement_code)}),e},this.getEmptySlotCodes=function(){var e=[];return E.each(function(t,n){t.rendered&&t.rendered.isEmpty&&e.push(t.placement_code)}),e},this.getDeliveredSlots=function(){var e={};return E.each(function(t,n){t.rendered&&(e[t.placement_code]=t.rendered)}),e},this.clearTargeting=function(){E.each(function(e){e.clearTargeting()})}};r=new G(_),d=new G(y),a=new G(B),o=new G(w),g.setResize(function(e,t,n){var i=r.getNewestSlotByPlacementCode(e);return i?void i.resizeContainer(t,n):u.logMessage("AdBridg was unable to locate slot for resizing"+[e,t,n].join("/"))})},{"../prebid":17,"../utils":18,"./analytics":8,"./configuration":9,"./proxy":12}],12:[function(e,t,n){var i=[];n.analytics=function(){i.push(Array.prototype.slice.apply(arguments))},n.setAnalytics=function(e){for(i.push=function(t){var n=t.shift();"function"==typeof e[n]&&e[n].apply(null,t)};i.length;)i.push(i.shift())};var r=[];n.waitForPbjs=function(e){r.push(e)},n.setPbjs=function(e){for(r.push=function(t){t.call(null,e)};r.length;)r.push(r.shift())};var d=!1;n.setGPT=function(e){d=e},n.useGPT=function(){return d?d:window.googletag};var a=function(){};n.setResize=function(e){a=e},n.resize=function(){a.apply(null,arguments)}},{}],13:[function(e,t,n){n.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,t&&"function"==typeof t&&(n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src=e;var i=document.getElementsByTagName("head");i=i.length?i:document.getElementsByTagName("body"),i.length&&(i=i[0],i.insertBefore(n,i.firstChild))},n.trackPixel=function(e){try{if(e+="&rnd="+Math.random()){var t=document.createElement("img");t.src=e}}catch(n){}}},{}],14:[function(e,t,n){function i(e){function t(){switch(i){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}var n=r.getUniqueIdentifierStr(),i=e||0;this.bidderCode="",this.width=0,this.height=0,this.statusMessage=t(),this.statusCode=e,this.adId=n,this.getStatusCode=function(){return i},this.getSize=function(){return this.width+"x"+this.height}}var r=e("./utils.js");n.createBid=function(e){return new i(e)}},{"./utils.js":18}],15:[function(e,t,n){function i(e,t){var n={},i=u.bidderSettings||{};return e&&t&&i&&i[e]?r(n,i[e],t):S[e]?r(n,S[e],t):t&&i&&(i[c.JSON_MAPPING.BD_SETTING_STANDARD]||(i[c.JSON_MAPPING.BD_SETTING_STANDARD]={adserverTargeting:[{key:"hb_bidder",val:function(e){return e.bidderCode}},{key:"hb_adid",val:function(e){return e.adId}},{key:"hb_pb",val:function(e){return e.pbMg}},{key:"hb_size",val:function(e){return e.size}}]}),t.usesGenericKeys=!0,r(n,i[c.JSON_MAPPING.BD_SETTING_STANDARD],t)),n}function r(e,t,n){var i=t[c.JSON_MAPPING.ADSERVER_TARGETING];return n.size=n.getSize(),l._each(i,function(t){var i=t.key,r=t.val;if(l.isFn(r))try{e[i]=r(n)}catch(d){l.logError("bidmanager","ERROR",d)}else e[i]=r}),e}function d(e){var t=[e];a(p,t)}function a(e,t){var n;if(l.isArray(e))for(n=0;n<e.length;n++){var i=e[n];o(i,t)}else o(e,t)}function o(e,t){if("function"==typeof e)try{e.apply(u,t)}catch(n){l.logError("Error executing callback function: "+n.message)}}function s(e){for(var t=0;t<u.adUnits.length;t++){var n=u.adUnits[t];if(n.code===e){var i=_[e].bidsReceivedCount;i===n.bids.length&&d(e)}}}var u,c=e("./constants.json"),l=e("./utils.js"),g=e("./adbridg/proxy");g.waitForPbjs(function(e){u=e});var f="function",p=[],h=[],b=null,m={},v={};n.pbCallbackMap=v;var _={};n.pbBidResponseByPlacement=_;var y={};n._adResponsesByBidderId=y;var B=0;n.bidRequestCount=B;var w=0;n.bidResponseRecievedCount=w;var A=!1,I=!1,S={},C={},x=!1,T={};n.getPlacementIdByCBIdentifer=function(e){return v[e]},n.incrementBidCount=function(){B++},n.getBidResponseByAdUnit=function(e){return _},n.clearAllBidResponses=function(e){A=!1,I=!1,B=0,w=0,h.called=!1;for(var t in this.pbBidResponseByPlacement)delete this.pbBidResponseByPlacement[t]},n.addBidResponse=function(e,t){var n={};if(t){t.requestTimestamp=C[t.bidderCode],t.responseTimestamp=(new Date).getTime(),t.timeToRespond=t.responseTimestamp-t.requestTimestamp,w++,2===t.getStatusCode()&&(t.cpm=0);var r=l.getPriceBucketString(t.cpm,t.height,t.width);t.pbLg=r.low,t.pbMg=r.med,t.pbHg=r.high,x&&(T[t.adbuid]=T[t.adbuid]||[],T[t.adbuid].push([t.adbbdr,t.adbbuid,t.getStatusCode(),t.cpm||0,t.timeToRespond])),t.adUnitCode=e,t.bidder=t.bidderCode;var d={};t.bidderCode&&0!==t.cpm&&(d=i(t.bidderCode,t),t.adserverTargeting=d),t.adId&&(y[t.adId]=t),e&&_[e]?(n=_[e],n.bids.push(t),n.bidsReceivedCount++):l.logError("Internal error in bidmanager.addBidResponse. Params: "+e+" & "+t)}else n=this.createEmptyBidResponseObj();_[e]=n,this.checkIfAllBidsAreIn(e)},n.createEmptyBidResponseObj=function(){return{bids:[],allBidsAvailable:!1,bidsReceivedCount:0}},n.registerDefaultBidderSetting=function(e,t){S[e]=t},n.registerBidRequestTime=function(e,t){C[e]=t},n.executeCallbackFromTimeout=function(){var e=B-w;e>0&&(x=(new Date).getTime(),g.analytics("timedOut",e)),n.executeCallback()},n.executeCallback=function(){if(typeof u.registerBidCallbackHandler===f&&!I)try{u.registerBidCallbackHandler(),I=!0}catch(e){I=!0,l.logError("Exception trying to execute callback handler registered : "+e.message)}if(h.called!==!0){var t=[];a(h,t),h.called=!0}b&&(a(b),b=null)},n.allBidsBack=function(){return A},n.setBidderMap=function(e){m=e},n.checkIfAllBidsAreIn=function(e){0!==B&&B===w&&(A=!0),s(e),A&&(x&&(g.analytics("latencyBids",T),T={},x=!1),this.executeCallback())},n.addOneTimeCallback=function(e){b=e},n.addCallback=function(e,t,n){t.id=e,c.CB.TYPE.ALL_BIDS_BACK===n?h.push(t):c.CB.TYPE.AD_UNIT_BIDS_BACK===n&&p.push(t)}},{"./adbridg/proxy":12,"./constants.json":16,"./utils.js":18}],16:[function(e,t,n){t.exports={JSON_MAPPING:{PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},DEBUG_MODE:"adb_debug",STATUS:{GOOD:"good",TIMEOUT:"timed out"},CB:{TYPE:{ALL_BIDS_BACK:"allRequestedBidsBack",AD_UNIT_BIDS_BACK:"adUnitBidsBack"}},objectType_function:"function",objectType_undefined:"undefined",objectType_object:"object",objectType_string:"string",objectType_number:"number"}},{}],17:[function(e,t,n){function i(){for(var e=0;e<m.que.length;e++)typeof m.que[e].called===I&&(m.que[e].call(),m.que[e].called=!0)}function r(e,t){var n=0;if(n=typeof e===I||null===e?m.bidderTimeout:e,!d())return m.adbvalsct.shift(),void _.logMessage("No adUnits configured. No bids requested.");if(setTimeout(y.executeCallbackFromTimeout,n),t&&_.isArray(t))for(var i=0;i<t.length;i++){for(var r=0;r<m.adUnits.length;r++)m.adUnits[r].code===t[i]&&(T=[m.adUnits[r]]);o(),a()}else T=m.adUnits,o(),a()}function d(){return m.adUnits&&0!==m.adUnits.length?!0:!1}function a(e){var t=Object.keys(E).map(function(e){return E[e]});typeof e===A&&t.sort(e),B.callBids(t)}function o(){for(var e=0;e<T.length;e++){var t=T[e][v.JSON_MAPPING.PL_BIDS],n=T[e][v.JSON_MAPPING.PL_CODE];s(T[e][v.JSON_MAPPING.PL_CODE],T[e][v.JSON_MAPPING.PL_SIZE],t),y.addBidResponse(n)}for(e=0;e<x.length;e++)x[e].loadPreBid();y.setBidderMap(E)}function s(e,t,n){for(var i=0;i<n.length;i++){y.incrementBidCount();var r=n[i];r.placementCode=e,r.sizes=t;var d=n[i][v.JSON_MAPPING.BD_BIDDER],a=E[d];if(typeof a===I){var o={bidderCode:d,bids:[]};o.bids.push(r),E[d]=o}else a.bids.push(r)}}function u(e){if(!P&&(P=!0,e.cpm&&Math.random()<R)){var t=Math.floor(4*Math.random()),n=e.cpm;1==t?n+=.25:2==t?n+=.5:3==t&&(n+=1);var i=e.bid.adId;if(e.bid.adId="ADBTG"+t,e.bid.adserverTargeting.adb_adid=e.bid.adId,9.95>n){var r=.05*Math.floor(n/.05);e.bid.adserverTargeting.adb_hbc=Math.max(.01,r).toFixed(2)+"-"+(r+.04).toFixed(2)}else e.bid.adserverTargeting.adb_hbc="9.95-";y._adResponsesByBidderId[e.bid.adId]=y._adResponsesByBidderId[i],w.analytics("adbtg",[e.bid.adbuid,t])}return e}function c(e){var t={};return e&&0!==e.length&&(e.sort(function(e,t){return t.cpm-e.cpm}),t=u(e[0])),t.bid}function l(e,t,n){var i=[];if(0!==n.bids.length)for(var r=0;r<n.bids.length;r++){var d=n.bids[r];if(d.usesGenericKeys)i.push({cpm:d.cpm,bid:d});else{var a=n.bids[r].adserverTargeting;for(var o in a)if(a.hasOwnProperty(o))try{_.logMessage("Attempting to set key value for placement code: "+e+" slot: "+t+" key: "+o+" value: "+encodeURIComponent(a[o])),t.setTargeting(o,encodeURIComponent(a[o]))}catch(s){_.logError("Problem setting key value pairs in slot: "+s.message)}}}else _.logMessage("No bids eligble for adUnit code : "+e);if(0!==i.length){var u=c(i);j(u),w.analytics("winningUnitBid",u);var l=u.adserverTargeting;for(var o in l)if(l.hasOwnProperty(o))try{_.logMessage("Attempting to set key value for placement code: "+e+" slot: "+t+" key: "+o+" value: "+encodeURIComponent(l[o])),t.setTargeting(o,encodeURIComponent(l[o]))}catch(s){_.logError("Problem setting key value pairs in slot: "+s.message)}}P=!0}function g(e){var t={};return e?(t=y.pbBidResponseByPlacement[e],t?t:y.createEmptyBidResponseObj()):y.pbBidResponseByPlacement}function f(e){var t=[],n=[],i={};if(e)for(var r=0;r<e.length;r++){var d=e[r];i=p(d),d.usesGenericKeys?n.push({cpm:d.cpm,bid:d}):D[i.adUnitCode]=i.adserverTargeting,t.push(i)}if(0!==n.length){var a=c(n),o=a.adserverTargeting;D[i.adUnitCode]=o}return t}function p(e){var t={};if(e){var n=JSON.stringify(e);t=JSON.parse(n),delete t.pbLg,delete t.pbMg,delete t.pbHg}return t}function h(){y.clearAllBidResponses(),E={}}function b(e){var t=e;h(),r(t)}var m={que:[]},v=e("./constants.json"),_=e("./utils.js"),y=e("./bidmanager.js"),B=e("./adaptermanager"),w=e("./adbridg/proxy"),A="function",I="undefined",S="object",C="string";t.exports=m;var x=[],T=[],E={},D={};m.bidderTimeout=m.bidderTimeout||3e3,m.logging=_.logging||!1,m.libLoaded=!0,m.adUnits=m.adUnits||[],m.adbvalsct=[],m.que.push=function(e){if(typeof e===A)try{e.call()}catch(t){_.logError("Error processing command :"+t.message)}else _.logError("Commands written into pbjs.que.push must wrapped in a function")};var P=!1,R=0,j=function(e){try{var t=e.adbuid;if(!e.cpm||!t)return;for(var n=Math.round(100*e.cpm),i=((document.cookie.match(/_adbv=([a-z0-9.-]+)/)||[]).pop()||"").split("."),r=[],d=0;d<i.length;++d){var a=i[d].split("-"),o=parseInt(a[0],36)||0,s=parseInt(a[1],36)||0;o==t&&(s=n,t=!1),o&&s>5&&r.push(a[0]+"-"+s.toString(36))}t&&r.push(parseInt(t,10).toString(36)+"-"+n.toString(36));var u=new Date;u.setTime(u.getTime()+36e5),document.cookie="_adbv="+r.join(".")+"; expires="+u.toGMTString()+"; path=/"}catch(c){}};m.getAdserverTargetingForAdUnitCode=function(e){return m.getBidResponses(e),e?D[e]:D},m.getAdserverTargeting=function(){return m.getAdserverTargetingForAdUnitCode()},m.getBidResponses=function(e){var t={},n=[],i={};if(e)t=g(e),n=[],t&&t.bids&&(n=f(t.bids)),i={bids:n};else{t=g();for(var r in t)t.hasOwnProperty(r)&&(t&&t[r]&&t[r].bids&&(n=f(t[r].bids)),i[r]={bids:n})}return i},m.getBidResponsesForAdUnitCode=function(e){return m.getBidResponses(e)},m.setTargetingForAdUnitsGPTAsync=function(e){if(!window.googletag||!window.googletag.pubads()||!window.googletag.pubads().getSlots())return void _.logError("window.googletag is not defined on the page");var t=e;typeof e===C?t=[e]:typeof e===S&&(t=e);var n={},i=0;if(t)for(i=0;i<t.length;i++)for(var r=t[i],d=window.googletag.pubads().getSlots(),a=0;a<d.length;a++)d[a].getAdUnitPath()===r&&(n=g(r),l(r,d[a],n));else{var d=window.googletag.pubads().getSlots();for(i=0;i<d.length;i++){var o=d[i].getAdUnitPath();o&&(n=g(o),l(o,d[i],n))}}},m.setTargetingForGPTAsync=function(){m.setTargetingForAdUnitsGPTAsync()},m.allBidsAvailable=function(){return y.allBidsBack()},m.renderAd=function(e,t){if(_.logMessage("Calling renderAd with adId :"+t),e&&t)try{var n=y._adResponsesByBidderId[t];if(n){var i=n.height,r=n.width,d=n.adUrl,a=n.ad;if("aol"==n.bidderCode)try{n.adbinfo+=","+(String(a).match(/\<img[^\>]+(adserver\.adtechus\.com[^"']+)/)||[]).pop()}catch(o){}a?(e.write(a),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=i),w.resize(n.adUnitCode,r,i)):d?(e.write('<IFRAME SRC="'+d+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="'+r+'" HEIGHT="'+i+'"></IFRAME>'),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=i),w.resize(n.adUnitCode,r,i)):_.logError("Error trying to write ad. No ad for bid response id: "+t)}else _.logError("Error trying to write ad. Cannot find ad by given id : "+t)}catch(o){_.logError("Error trying to write ad Id :"+t+" to the page:"+o.message)}else _.logError("Error trying to write ad Id :"+t+" to the page. Missing document or adId")},m.requestBidsForAdUnit=function(e){h(),r(e)},m.requestBidsForAdUnits=function(e){if(!e||e.constructor!==Array)return void _.logError("requestBidsForAdUnits must pass an array of adUnits");h();var t=m.adUnits.slice(0);m.adUnits=e,r(),m.adUnits=t},m.removeAdUnit=function(e){if(e)for(var t=0;t<m.adUnits.length;t++)m.adUnits[t].code===e&&(m.adUnits=m.adUnits.splice(t,1))},m.requestBids=function(e){if(e){var t=e.adUnitCodes,n=e.adUnits,i=e.timeout,d=e.bidsBackHandler,a=m.adUnits.slice(0);typeof d===A&&y.addOneTimeCallback(d),t&&_.isArray(t)?(h(),r(i,t)):n&&_.isArray(n)?(h(),m.adUnits=n,r(i)):b(i),m.adUnits=a}else b()},m.addAdUnits=function(e){_.isArray(e)?m.adUnits.push.apply(m.adUnits,e):typeof e===S&&m.adUnits.push(e)},m.addCallback=function(e,t){var n=null;return e&&t&&typeof t===A?(n=_.getUniqueIdentifierStr,y.addCallback(n,t,e),n):(_.logError("error registering callback. Check method signature"),n)},m.removeCallback=function(e){},w.setPbjs(m),i()},{"./adaptermanager":1,"./adbridg/proxy":12,"./bidmanager.js":15,"./constants.json":16,"./utils.js":18}],18:[function(e,t,n){function i(){return _()+Math.random().toString(16).substr(2)}function r(){return window.console&&window.console.log}var d=e("./constants.json"),a=e("./adbridg/proxy"),o="function",s="object",u="string",c="number",l=!1,g=5,f=20,p=20,h="Array",b="String",m="Function",v=Object.prototype.hasOwnProperty;Array.prototype.slice;n.replaceTokenInString=function(e,t,n){return this._each(t,function(t,i){t=void 0===t?"":t;var r=n+i.toUpperCase()+n,d=new RegExp(r,"g");e=e.replace(d,t)}),e};var _=function(){var e=0;return function(){return e++,e}}();n.getUniqueIdentifierStr=i,n.getBidIdParamater=function(e,t){return t&&t[e]?t[e]:""},n.tryAppendQueryString=function(e,t,n){return n?e+=t+"="+encodeURIComponent(n)+"&":e},n.parseQueryStringParameters=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t},n.parseSizesInput=function(e,t){var n,i=[];if(typeof e===u){var r=e.split(","),d=/^(\d)+x(\d)+$/i;if(r)for(var a in r)hasOwn(r,a)&&r[a].match(d)&&i.push(r[a])}else if(typeof e===s){var o=e.length;if(o>0)if(2!==o||typeof e[0]!==c&&typeof e[0]!==u||typeof e[1]!==c&&typeof e[1]!==u)for(var l=0;o>l;l++)i.push(this.parseGPTSingleSizeArray(e[l]));else i.push(this.parseGPTSingleSizeArray(e))}if(t)return i;var g=i.length;if(g>0&&(n="size="+i[0],g>1)){n+="&promo_sizes=";for(var f=1;g>f;f++)n+=i[f]+=",";n&&","===n.charAt(n.length-1)&&(n=n.slice(0,n.length-1))}return n},n.combineSizeInputs=function(){var e,t,i,r,d={},a=[];for(e=0;e<arguments.length;++e)for(i=n.parseSizesInput(arguments[e],!0),t=0;t<i.length;++t)r=i[t],d[r]||(d[r]=1,r=r.split("x"),a.push(r));return 1==a.length?a.pop():a},n.parseGPTSingleSizeArray=function(e){return!n.isArray(e)||2!==e.length||isNaN(e[0])||isNaN(e[1])?void 0:e[0]+"x"+e[1]},n.getTopWindowUrl=function(){try{return window.top.location.href}catch(e){return window.location.href}},n.getTopWindowRef=function(){try{return window.top.document.referrer}catch(e){return window.document.referrer}},n.logMessage=function(e){B()&&r()&&console.log("MESSAGE: "+e)},n.hasConsoleLogger=r;var y=function(e){return e?window.console.error?"error":"log":""}(r());n.logging=!1,n.enableDebug=function(){n.logging=!0};var B=function(){return n.logging===!1&&l===!1&&(n.logging=!!w(d.DEBUG_MODE),l=!0),n.logging?!0:!1};n.debugTurnedOn=B,n.logError=function(e,t,n){var i=t||"ERROR";if(a.analytics("pbjsError",e),B()&&r())try{console[y].call(console,i+": "+e,n||"")}catch(d){console.log(i+": "+e,n||"")}},n.createInvisibleIframe=function(e){var t=document.createElement("iframe");return t.id=i(),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",e||(t.src="about:self"),t.style="display:none",t};var w=function(e){var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),i=n.exec(window.location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))};n.getPriceBucketString=function(e){var t="",n="",i="",r=0,d={low:t,med:n,high:i};try{r=parseFloat(e),r&&(r>g?d.low=g.toFixed(2):d.low=(Math.floor(2*e)/2).toFixed(2),r>f?d.med=f.toFixed(2):d.med=(Math.floor(10*e)/10).toFixed(2),r>p?d.high=p.toFixed(2):d.high=(Math.floor(100*e)/100).toFixed(2))}catch(a){this.logError("Exception parsing CPM :"+a.message)}return d},n.hasValidBidRequest=function(e,t,n){for(var i=0;i<t.length;i++){var r=!1;if(this._each(e,function(e,n){n===t[i]&&(r=!0)}),!r)return this.logError("Params are missing for bid request. One of these required paramaters are missing: "+t,n),!1}return!0},n.addEventHandler=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent("on"+t,n)},n.isA=function(e,t){try{return toString.call(e)==="[object "+t+"]"}catch(n){switch(t){case h:return e.constructor===Array.prototype.constructor;case b:return e.constructor===String.prototype.constructor;case m:return typeof e==o}return!1}},n.isFn=function(e){return this.isA(e,m)},n.isStr=function(e){return this.isA(e,b)},n.isArray=function(e){return this.isA(e,h)},n.isEmpty=function(e){if(!e)return!0;if(this.isArray(e)||this.isStr(e))return!(e.length>0);for(var t in e)if(v.call(e,t))return!1;return!0},n._each=function(e,t){if(!this.isEmpty(e)){if(this.isFn(e.forEach))return e.forEach(t);var n=0,i=e.length;if(i>0)for(;i>n;n++)t(e[n],n,e);else for(n in e)v.call(e,n)&&t(e[n],n,e)}},n.extend=function(e,t){return e=e||{},this._each(t,function(n,i){typeof t[i]===s?e[i]=this.extend(e[i],t[i]):e[i]=t[i]}),e},n.tryBidHandler=function(e){return function(){try{e.apply(null,arguments)}catch(t){a.analytics("postBidError",t.stack||t.message)}}},n.BreakException={}},{"./adbridg/proxy":12,"./constants.json":16}]},{},[10]);